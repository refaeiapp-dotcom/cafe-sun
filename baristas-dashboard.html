<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ù…Ø§Ù„</title>
  <style>
    body {
      font-family: Tahoma, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
      text-align: center;
    }
    h1 {
      margin-bottom: 20px;
      color: #333;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 15px;
    }
    .barista {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }
    .barista h2 {
      margin: 5px 0 15px;
      color: darkblue;
      font-size: 18px;
    }
    .order {
      background: #f1f1f1;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      text-align: right;
    }
    .order h3 {
      margin: 0 0 5px 0;
    }
    .status {
      font-weight: bold;
      padding: 3px 6px;
      border-radius: 6px;
      display: inline-block;
      margin-top: 5px;
    }
    .red { background: crimson; color: white; }
    .yellow { background: goldenrod; color: black; }
    .green { background: seagreen; color: white; }
  </style>
</head>
<body>

  <h1>ğŸ“Š Ù„ÙˆØ­Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ù…Ø§Ù„</h1>

  <div class="grid">
    <div class="barista"><h2 id="title1">ğŸ‘¤ Barista 1</h2><div id="barista1"></div></div>
    <div class="barista"><h2 id="title2">ğŸ‘¤ Barista 2</h2><div id="barista2"></div></div>
    <div class="barista"><h2 id="title3">ğŸ‘¤ Barista 3</h2><div id="barista3"></div></div>
    <div class="barista"><h2 id="title4">ğŸ‘¤ Barista 4</h2><div id="barista4"></div></div>
    <div class="barista"><h2 id="title5">ğŸ‘¤ Barista 5</h2><div id="barista5"></div></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js";

    // âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAYYtMci_1laKbOxpVYaHsMx670WPhtNbk",
      authDomain: "my-restaurant-aba99.firebaseapp.com",
      projectId: "my-restaurant-aba99",
      storageBucket: "my-restaurant-aba99.appspot.com",
      messagingSenderId: "512969391867",
      appId: "1:512969391867:web:36a528665b3469871a3a5e",
      databaseURL: "https://my-restaurant-aba99-default-rtdb.firebaseio.com/"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØªÙˆØ²ÙŠØ¹Ù‡Ø§ Ø­Ø³Ø¨ assignedTo
    const ordersRef = ref(db, "orders");
    onValue(ordersRef, (snapshot) => {
      // Ù…Ø³Ø­ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«
      for (let i = 1; i <= 5; i++) {
        document.getElementById("barista" + i).innerHTML = "";
        document.getElementById("title" + i).textContent = "ğŸ‘¤ Barista " + i + " (0 Ø·Ù„Ø¨)";
      }

      // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
      const counters = { barista1:0, barista2:0, barista3:0, barista4:0, barista5:0 };

      if (snapshot.exists()) {
        snapshot.forEach((child) => {
          const data = child.val();
          if (data.assignedTo) {
            const div = document.createElement("div");
            div.className = "order";
            div.innerHTML = `
              <h3>ğŸ½ï¸ Ø·Ø§ÙˆÙ„Ø© ${data.table}</h3>
              <ul>
                ${data.order.map(item => `<li>${item.name} Ã— ${item.qty} = ${item.qty * item.price}Ø¬</li>`).join("")}
              </ul>
              <p><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</b> ${data.total} Ø¬Ù†ÙŠÙ‡</p>
              ${data.notes ? `<p><b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b> ${data.notes}</p>` : ""}
              <span class="status ${statusColor(data.status)}">${data.status || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}</span>
            `;
            // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¹Ø§Ù…Ù„
            const col = document.getElementById(data.assignedTo);
            if (col) {
              col.appendChild(div);
              counters[data.assignedTo]++;
            }
          }
        });
      }

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ø¯
      for (let i = 1; i <= 5; i++) {
        document.getElementById("title" + i).textContent = `ğŸ‘¤ Barista ${i} (${counters["barista"+i]} Ø·Ù„Ø¨)`;
      }
    });

    function statusColor(status) {
      switch (status) {
        case "Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°": return "red";
        case "Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±": return "yellow";
        case "Ù…Ù†ØªÙ‡ÙŠ": return "green";
        default: return "";
      }
    }
  </script>
</body>
</html>
